import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.Scanner;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.Clip;
import javax.sound.sampled.LineUnavailableException;
import javax.sound.sampled.UnsupportedAudioFileException;

public class musicPlayerTerminal {
  public static void main(String[] args) {
    String filepath = "/home/fer/Music/freesound_community-random-wave-42704-52850.wav";
    File file = new File(filepath);

    try (Scanner scanner = new Scanner(System.in);
        AudioInputStream audioStream = AudioSystem.getAudioInputStream(file)) {
      Clip clip = AudioSystem.getClip();
      clip.open(audioStream);
      clip.start();

      String response = "";

      while (!response.equals("Q")) {
        System.out.println("P = Play");
        System.out.println("S = Stop");
        System.out.println("R = Rest");
        System.out.println("Q = Quit");
        System.out.print("You can enter your choice: ");

        response = scanner.next().toUpperCase();

        switch (response) {
          case "P" -> clip.start();
          case "S" -> clip.stop();
          case "R" -> clip.setMicrosecondPosition(0);
          case "Q" -> clip.close();
          default -> System.out.print("That's not an option");
        }
      }
      scanner.close();
    } catch (LineUnavailableException e) {
      System.out.println("Unable to access audio resource");
    } catch (FileNotFoundException e) {
      System.out.println("Can not find the file");
    } catch (UnsupportedAudioFileException e) {
      System.out.println("The audio file was unsupported");
    } catch (IOException e) {
      System.out.println("There was a error.");
    } finally {
      System.out.println("Bye");
    }
  }
}
